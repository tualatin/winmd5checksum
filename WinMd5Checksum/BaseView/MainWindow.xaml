<Window
  x:Class="Org.Vs.WinMd5.BaseView.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
  xmlns:taskbarNotification="clr-namespace:Hardcodet.Wpf.TaskbarNotification"
  xmlns:userControls="clr-namespace:Org.Vs.WinMd5.BaseView.UserControls"
  xmlns:userControls1="clr-namespace:Org.Vs.WinMd5.UI.UserControls"
  xmlns:utils="clr-namespace:Org.Vs.WinMd5.Core.Utils"
  xmlns:viewModels="clr-namespace:Org.Vs.WinMd5.BaseView.ViewModels"
  mc:Ignorable="d"
  Title="{Binding Source={x:Static utils:EnvironmentContainer.ApplicationTitle}}"
  Width="800"
  Height="450"
  MinWidth="800"
  MinHeight="450"
  AllowsTransparency="True"
  Icon="/WinMd5;component/Resources/Key.ico"
  ResizeMode="CanResizeWithGrip"
  Style="{StaticResource BlueWindowStyle}"
  Topmost="{Binding Source={x:Static utils:EnvironmentContainer.Instance}, Path=AlwaysOnTop, UpdateSourceTrigger=PropertyChanged}"
  WindowStartupLocation="CenterScreen"
  WindowStyle="None"
  >
  <Window.DataContext>
    <viewModels:MainWindowViewModel />
  </Window.DataContext>

  <i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
      <i:InvokeCommandAction Command="{Binding LoadedCommand}" />
    </i:EventTrigger>
  </i:Interaction.Triggers>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition />
      <RowDefinition Height="25" />
    </Grid.RowDefinitions>

    <userControls:MainWindowStatusBar Grid.Row="1" />

    <!--  TaskbarIcon part  -->
    <taskbarNotification:TaskbarIcon
      x:Name="TbIcon"
      IconSource="/WinMd5;component/Resources/Key.ico"
      >
      <taskbarNotification:TaskbarIcon.TrayToolTip>
        <userControls1:FancyToolTip
          ApplicationText="{Binding Source={x:Static utils:EnvironmentContainer.ApplicationTitle}}"
          InfoText="{Binding Source={x:Static viewModels:BaseWindowStatusbarViewModel.Instance}, Path=CurrentBusyState, UpdateSourceTrigger=PropertyChanged}"
          Opacity="0.85"
          />
      </taskbarNotification:TaskbarIcon.TrayToolTip>
    </taskbarNotification:TaskbarIcon>

  </Grid>
</Window>
